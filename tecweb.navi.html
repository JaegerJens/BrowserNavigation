<html>
<head>
    <title>TecWeb Navigation Demo</title>
<script type="text/javascript">
    function show(view)
    {
        var p = document.getElementById(view);
        p.style.display = "block";
    }

    function hide(view) {
        var p = document.getElementById(view);
        p.style.display = "none";
    }
    function showLogin() {
        hide("privacypolicy");
        hide("app");
        show("login");
    }
    function showPrivacyPolicy() {
        hide("login");
        hide("app");
        show("privacypolicy");
    }
    function showApp() {
        hide("login");
        hide("privacypolicy");
        show("app");
    }
    function getAnchor() {
	    return window.location.hash.substring(1);
    }
    function displayLocation(loc) {
        var location = document.getElementById("location");
        location.textContent = "Current Location: " + loc;
    }
    function onHashChanged(event) {
        var view = getAnchor();
        route(view);
    }
    function route(view)
    {
        if (!view) {
            var view = getAnchor();
        }
        console.trace("route to: " + view);
        
        switch (view) {
            case "login":
                showLogin();
                break;
            case "privacypolicy":
                showPrivacyPolicy();
                break;
            case "app":
                showApp();
                break;
            default:
                showLogin();
                view = "login";
                break;
        }
        displayLocation(view);
    }
    function checkLogin() {
        var email = document.getElementById("loginEmail");
        var password = document.getElementById("loginPassword");
        if ((email.value === "jens@localhost") && (password.value === "secret")) {
            console.trace("login successful");
            window.location.hash = "#privacypolicy";
        } else {
            console.trace("login failed");
        }
        return false;
    }

</script>
</head>
<body>
    <div id="login">
        <form>
            <label for="email">Email</label><input id="loginEmail" type="text" name="email" value="jens@localhost" />
            <label for="password">Password</label><input id="loginPassword" type="password" name="password"  value="secret" />
            <input type="button" value="login" onclick="checkLogin()"/>
        </form>
    </div>
    <div id="privacypolicy" style="display: none">
        <h1>Data Privacy Policy</h1>
        <div>We track every click you make</div>
        <a href="#app" onclick="route('app')">Accept</a>
    </div>
    <div id="app" style="display: none">
        <h1>TecWeb Application</h1>
        <ul>
            <li>Order</li>
            <li>Basket</li>
            <li>History</li>
        </ul>
    </div>
    <div id="location"></div>
    <script type="text/javascript">
        route();
        window.onhashchange = onHashChanged;
    </script>
</body>
</html>
